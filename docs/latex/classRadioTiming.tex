\hypertarget{classRadioTiming}{}\section{Radio\+Timing Class Reference}
\label{classRadioTiming}\index{Radio\+Timing@{Radio\+Timing}}


{\ttfamily \#include $<$mesh\+\_\+protocol.\+hpp$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classRadioTiming_a8889214bcfb05975e8ed121a59ffb06c}{compute\+Times} (const uint32\+\_\+t bw, const uint8\+\_\+t sf, const uint8\+\_\+t cr, const uint32\+\_\+t n\+\_\+pre\+\_\+sym, uint8\+\_\+t n\+\_\+pld\+\_\+bytes)
\item 
void \hyperlink{classRadioTiming_a5968dcc1c5dc7aa644e4fd4b3c44f373}{wait\+Full\+Slots} (const size\+\_\+t num\+\_\+slots)
\item 
void \hyperlink{classRadioTiming_ab794bed8927778ed17a9cbbfe1cf4a5f}{wait\+Rx\+Remainder} (const size\+\_\+t sym\+\_\+wait, const size\+\_\+t pre\+\_\+wait)
\item 
void \hyperlink{classRadioTiming_a763af2aa098f7b311c149dbf062d40a2}{calc\+Wait\+Symbol} (void)
\item 
void \hyperlink{classRadioTiming_ab88cd62548731862e0a24c986bf095bf}{calc\+Wait\+Preamble} (void)
\item 
void \hyperlink{classRadioTiming_a8451969371826cd733288652f5323053}{wait\+Tx} (void)
\item 
void \hyperlink{classRadioTiming_a20de4c0e271dcab020ab6fa999570855}{start\+Timer} (void)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classRadioTiming_aefbdd2b026a1a79309d6aeeefdaf40b8}\label{classRadioTiming_aefbdd2b026a1a79309d6aeeefdaf40b8}} 
float {\bfseries sym\+\_\+time\+\_\+s}
\item 
\mbox{\Hypertarget{classRadioTiming_ad19e65dbeeb639eb6ee649866e89e536}\label{classRadioTiming_ad19e65dbeeb639eb6ee649866e89e536}} 
float {\bfseries pre\+\_\+time\+\_\+s}
\item 
\mbox{\Hypertarget{classRadioTiming_ac36b1fb03c10f93b24d056874ac51a45}\label{classRadioTiming_ac36b1fb03c10f93b24d056874ac51a45}} 
float {\bfseries pld\+\_\+time\+\_\+s}
\item 
\mbox{\Hypertarget{classRadioTiming_a184adafe6bf2be6dfcf82ca2a0a5637e}\label{classRadioTiming_a184adafe6bf2be6dfcf82ca2a0a5637e}} 
float {\bfseries pkt\+\_\+time\+\_\+s}
\item 
\mbox{\Hypertarget{classRadioTiming_a81443aaabc3c0c3b78ed3043b17d5806}\label{classRadioTiming_a81443aaabc3c0c3b78ed3043b17d5806}} 
float {\bfseries sym\+\_\+frac\+\_\+s}
\item 
\mbox{\Hypertarget{classRadioTiming_ab5b6fbb40a3a6cbc106c8a11b1b0ad3c}\label{classRadioTiming_ab5b6fbb40a3a6cbc106c8a11b1b0ad3c}} 
uint32\+\_\+t {\bfseries sym\+\_\+time\+\_\+ms}
\item 
\mbox{\Hypertarget{classRadioTiming_a684ff61587b4e602d68e368828d5e0fd}\label{classRadioTiming_a684ff61587b4e602d68e368828d5e0fd}} 
uint32\+\_\+t {\bfseries pre\+\_\+time\+\_\+ms}
\item 
\mbox{\Hypertarget{classRadioTiming_a7844f4062af12e888c4518a077c5b71e}\label{classRadioTiming_a7844f4062af12e888c4518a077c5b71e}} 
uint32\+\_\+t {\bfseries pld\+\_\+time\+\_\+ms}
\item 
\mbox{\Hypertarget{classRadioTiming_a55dfaed2581c0a80e77a74bed7e4a8aa}\label{classRadioTiming_a55dfaed2581c0a80e77a74bed7e4a8aa}} 
uint32\+\_\+t {\bfseries pkt\+\_\+time\+\_\+ms}
\item 
\mbox{\Hypertarget{classRadioTiming_ae05d86854591a70740408ed065326693}\label{classRadioTiming_ae05d86854591a70740408ed065326693}} 
uint32\+\_\+t {\bfseries sym\+\_\+frac\+\_\+ms}
\item 
\mbox{\Hypertarget{classRadioTiming_aa03e719ed43539a05e1c7cef92fc8f22}\label{classRadioTiming_aa03e719ed43539a05e1c7cef92fc8f22}} 
uint32\+\_\+t {\bfseries sym\+\_\+time\+\_\+us}
\item 
\mbox{\Hypertarget{classRadioTiming_a08dd97045580ced34fc273ea4a70b5a5}\label{classRadioTiming_a08dd97045580ced34fc273ea4a70b5a5}} 
uint32\+\_\+t {\bfseries pre\+\_\+time\+\_\+us}
\item 
\mbox{\Hypertarget{classRadioTiming_ab5e0df9c2b1eda8fdc63c871c005ea92}\label{classRadioTiming_ab5e0df9c2b1eda8fdc63c871c005ea92}} 
uint32\+\_\+t {\bfseries pld\+\_\+time\+\_\+us}
\item 
\mbox{\Hypertarget{classRadioTiming_a754e188f6b7f7c35758a2772921b2772}\label{classRadioTiming_a754e188f6b7f7c35758a2772921b2772}} 
uint32\+\_\+t {\bfseries pkt\+\_\+time\+\_\+us}
\item 
\mbox{\Hypertarget{classRadioTiming_adb8ac7bfc6a47573783f81e2e73f6f19}\label{classRadioTiming_adb8ac7bfc6a47573783f81e2e73f6f19}} 
uint32\+\_\+t {\bfseries sym\+\_\+frac\+\_\+us}
\item 
\mbox{\Hypertarget{classRadioTiming_aaf4435d9eea1188f33cc4ee721d50aca}\label{classRadioTiming_aaf4435d9eea1188f33cc4ee721d50aca}} 
uint32\+\_\+t {\bfseries n\+\_\+sym\+\_\+pre}
\item 
\mbox{\Hypertarget{classRadioTiming_a45c73aab6fb2f5c99f7976719f645abf}\label{classRadioTiming_a45c73aab6fb2f5c99f7976719f645abf}} 
uint32\+\_\+t {\bfseries n\+\_\+sym\+\_\+pld}
\item 
\mbox{\Hypertarget{classRadioTiming_af93a55972434e013e09fadcd311381ab}\label{classRadioTiming_af93a55972434e013e09fadcd311381ab}} 
uint32\+\_\+t {\bfseries n\+\_\+sym\+\_\+pkt}
\item 
\mbox{\Hypertarget{classRadioTiming_a67b79a8285adbcaf5dbc816dbf744f2b}\label{classRadioTiming_a67b79a8285adbcaf5dbc816dbf744f2b}} 
uint32\+\_\+t {\bfseries sym\+\_\+wait\+\_\+factor}
\item 
\mbox{\Hypertarget{classRadioTiming_aba1eba0435a7dc3d3103e40a30086b9e}\label{classRadioTiming_aba1eba0435a7dc3d3103e40a30086b9e}} 
uint32\+\_\+t {\bfseries sym\+\_\+wait\+\_\+us}
\item 
\mbox{\Hypertarget{classRadioTiming_a63d388c95d8eff525d12c199d6bd59fe}\label{classRadioTiming_a63d388c95d8eff525d12c199d6bd59fe}} 
uint32\+\_\+t {\bfseries pre\+\_\+wait\+\_\+factor}
\item 
\mbox{\Hypertarget{classRadioTiming_ae1c4611a8d342a27c11d7b6f7adcb6a9}\label{classRadioTiming_ae1c4611a8d342a27c11d7b6f7adcb6a9}} 
uint32\+\_\+t {\bfseries pre\+\_\+wait\+\_\+us}
\item 
\mbox{\Hypertarget{classRadioTiming_a682b2b5c537f20be8668d76dbed42db9}\label{classRadioTiming_a682b2b5c537f20be8668d76dbed42db9}} 
Timer {\bfseries tmr}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A synchronized flooded mesh has all sort of timing-\/related things it needs to handle. This class handles all of these different timing things. Specifically, it handles\+:
\begin{DoxyItemize}
\item Calculating Lo\+Ra timing values, such as symbol duration, preamble duration, payload duration, etc.
\item Starting and stopping the fine-\/grained (millisecond or less) timer(s) necessary to make sure transmissions are properly synchronized.
\item Waiting the precise amount of time before e.\+g. retransmitting. 
\end{DoxyItemize}

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classRadioTiming_ab88cd62548731862e0a24c986bf095bf}\label{classRadioTiming_ab88cd62548731862e0a24c986bf095bf}} 
\index{Radio\+Timing@{Radio\+Timing}!calc\+Wait\+Preamble@{calc\+Wait\+Preamble}}
\index{calc\+Wait\+Preamble@{calc\+Wait\+Preamble}!Radio\+Timing@{Radio\+Timing}}
\subsubsection{\texorpdfstring{calc\+Wait\+Preamble()}{calcWaitPreamble()}}
{\footnotesize\ttfamily void Radio\+Timing\+::calc\+Wait\+Preamble (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Calculate the random preamble-\/length wait period. Chooses between \mbox{[}0,3\mbox{]} different preamble offsets. \mbox{\Hypertarget{classRadioTiming_a763af2aa098f7b311c149dbf062d40a2}\label{classRadioTiming_a763af2aa098f7b311c149dbf062d40a2}} 
\index{Radio\+Timing@{Radio\+Timing}!calc\+Wait\+Symbol@{calc\+Wait\+Symbol}}
\index{calc\+Wait\+Symbol@{calc\+Wait\+Symbol}!Radio\+Timing@{Radio\+Timing}}
\subsubsection{\texorpdfstring{calc\+Wait\+Symbol()}{calcWaitSymbol()}}
{\footnotesize\ttfamily void Radio\+Timing\+::calc\+Wait\+Symbol (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Calculate a random intra-\/symbol wait duration. Chooses between \mbox{[}0,7\mbox{]} eights of the symbol duration. Stores the result internally within the object. \mbox{\Hypertarget{classRadioTiming_a8889214bcfb05975e8ed121a59ffb06c}\label{classRadioTiming_a8889214bcfb05975e8ed121a59ffb06c}} 
\index{Radio\+Timing@{Radio\+Timing}!compute\+Times@{compute\+Times}}
\index{compute\+Times@{compute\+Times}!Radio\+Timing@{Radio\+Timing}}
\subsubsection{\texorpdfstring{compute\+Times()}{computeTimes()}}
{\footnotesize\ttfamily void Radio\+Timing\+::compute\+Times (\begin{DoxyParamCaption}\item[{const uint32\+\_\+t}]{bw,  }\item[{const uint8\+\_\+t}]{sf,  }\item[{const uint8\+\_\+t}]{cr,  }\item[{const uint32\+\_\+t}]{n\+\_\+pre\+\_\+sym,  }\item[{uint8\+\_\+t}]{n\+\_\+pld\+\_\+bytes }\end{DoxyParamCaption})}

Given the various Lo\+Ra parameters, pre-\/compute all of the different timing parameters. 
\begin{DoxyParams}{Parameters}
{\em bw} & Lo\+Ra bandwidth. \\
\hline
{\em sf} & Lo\+Ra spreading factor. \\
\hline
{\em cr} & Lo\+Ra coding rate. \\
\hline
{\em n\+\_\+pre\+\_\+sym} & Number of preamble symbols. \\
\hline
{\em n\+\_\+pld\+\_\+bytes} & Number of payload bytes. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classRadioTiming_a20de4c0e271dcab020ab6fa999570855}\label{classRadioTiming_a20de4c0e271dcab020ab6fa999570855}} 
\index{Radio\+Timing@{Radio\+Timing}!start\+Timer@{start\+Timer}}
\index{start\+Timer@{start\+Timer}!Radio\+Timing@{Radio\+Timing}}
\subsubsection{\texorpdfstring{start\+Timer()}{startTimer()}}
{\footnotesize\ttfamily void Radio\+Timing\+::start\+Timer (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Starts the protocol timer. \mbox{\Hypertarget{classRadioTiming_a5968dcc1c5dc7aa644e4fd4b3c44f373}\label{classRadioTiming_a5968dcc1c5dc7aa644e4fd4b3c44f373}} 
\index{Radio\+Timing@{Radio\+Timing}!wait\+Full\+Slots@{wait\+Full\+Slots}}
\index{wait\+Full\+Slots@{wait\+Full\+Slots}!Radio\+Timing@{Radio\+Timing}}
\subsubsection{\texorpdfstring{wait\+Full\+Slots()}{waitFullSlots()}}
{\footnotesize\ttfamily void Radio\+Timing\+::wait\+Full\+Slots (\begin{DoxyParamCaption}\item[{const size\+\_\+t}]{num\+\_\+slots }\end{DoxyParamCaption})}

Wait for a number of transmit slots. Note that this function uses the timer\textquotesingle{}s start time as the basis for how long to wait. Since the timer is typically started right after a Lo\+Ra packet is received, this function allows us to prepare a packet for retransmission, wait the remainder of one timeslot, and then retransmit it. 
\begin{DoxyParams}{Parameters}
{\em num\+\_\+slots} & Number of slots to wait. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classRadioTiming_ab794bed8927778ed17a9cbbfe1cf4a5f}\label{classRadioTiming_ab794bed8927778ed17a9cbbfe1cf4a5f}} 
\index{Radio\+Timing@{Radio\+Timing}!wait\+Rx\+Remainder@{wait\+Rx\+Remainder}}
\index{wait\+Rx\+Remainder@{wait\+Rx\+Remainder}!Radio\+Timing@{Radio\+Timing}}
\subsubsection{\texorpdfstring{wait\+Rx\+Remainder()}{waitRxRemainder()}}
{\footnotesize\ttfamily void Radio\+Timing\+::wait\+Rx\+Remainder (\begin{DoxyParamCaption}\item[{const size\+\_\+t}]{sym\+\_\+wait,  }\item[{const size\+\_\+t}]{pre\+\_\+wait }\end{DoxyParamCaption})}

Wait for the \char`\"{}remaining time\char`\"{} that includes various timing offsets used to implement Q\+Mesh\textquotesingle{}s collision resistance\+:
\begin{DoxyItemize}
\item Number of Preamble durations to wait
\item Intra-\/symbol delay fraction 
\begin{DoxyParams}{Parameters}
{\em sym\+\_\+wait} & How many eighths of a symbol to delay \\
\hline
{\em pre\+\_\+wait} & Number of preambles to wait \\
\hline
\end{DoxyParams}

\end{DoxyItemize}\mbox{\Hypertarget{classRadioTiming_a8451969371826cd733288652f5323053}\label{classRadioTiming_a8451969371826cd733288652f5323053}} 
\index{Radio\+Timing@{Radio\+Timing}!wait\+Tx@{wait\+Tx}}
\index{wait\+Tx@{wait\+Tx}!Radio\+Timing@{Radio\+Timing}}
\subsubsection{\texorpdfstring{wait\+Tx()}{waitTx()}}
{\footnotesize\ttfamily void Radio\+Timing\+::wait\+Tx (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Wait for the symbol and preamble offset durations. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
inc/protocol/mesh\+\_\+protocol.\+hpp\item 
src/protocol/mesh\+\_\+protocol.\+cpp\end{DoxyCompactItemize}
